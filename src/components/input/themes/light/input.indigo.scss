@use '../../../../styles/utilities' as *;

$label-focus-color: var(--label-focus-color, color(primary, 500)) !default;

%suffix-preffix {
    display: inline-flex;
    align-items: center;
    min-width: fit-content;
    height: 100%;
    padding-inline: pad-inline(8px, 12px, 16px);
}

:host {
    [part='prefix'],
    [part='suffix'] {
        color: color(gray, 600);
    }

    [part='prefix'] {
        grid-area: 1 / 1;

        ::slotted(*) {
            @extend %suffix-preffix;
        }
    }

    [part='suffix'] {
        grid-area: 1 / 3;

        ::slotted(*) {
            @extend %suffix-preffix;
        }
    }

    [part='label'] {
        color: color(gray, 600);
        margin-bottom: rem(4px);
        font-size: initial;
    }

    [part^='container'] {
        background: transparent;
        border-bottom: 1px solid color(gray, 500);
        transition: background .25s ease-out;
        grid-template-columns: auto 1fr auto;

        &::after {
            position: absolute;
            content: '';
            width: 100%;
            height: rem(2px);
            left: 0;
            right: 0;
            bottom: -1px;
            background: color(secondary, 500);
            transform: scaleY(0);
            transition: transform 180ms cubic-bezier(.4, 0, .2, 1), opacity 180ms cubic-bezier(.4, 0, .2, 1);
            transform-origin: bottom center;
        }
    }

    [part~='input'] {
        font-size: rem(16px);
        background: initial;
        padding: rem(8px);
        border: none;
        grid-area: 1 / 2;
    }

    [part='helper-text'] {
        padding: 0;
        color: color(gray, 600);
    }
}

:host(:hover),
:host([outlined]:hover) {
    [part^='container'] {
        background: color(gray, 100);
    }
}

:host(:focus-within),
:host([outlined]:focus-within) {
    [part^='container'] {
        background: color(gray, 100);

        &::after {
            transform: scaleY(1);
        }
    }

    [part='label'] {
        color: $label-focus-color;
    }
}

:host([invalid]) {
    [part^='container'] {
        border-color: color(error, 500);

        &::after {
            background: color(error, 500);
        }
    }

    [part='label'],
    [part^='helper-text'] {
        color: color(error, 500);
    }
}

:host([disabled]) {
    pointer-events: none;

    [part^='container'] {
        border-color: color(gray, 300);
        color: color(gray, 300);
    }

    [part='prefix'],
    [part='suffix'],
    [part='label'],
    [part='helper-text'] {
        color: color(gray, 300);
    }
}
